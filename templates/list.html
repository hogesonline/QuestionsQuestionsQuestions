<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="/static/main.css" />
  </head>
   <body>

{% for row in rows %}
<article class="q-text">
	<header class="box-heading {{ row['topic'] }}">
		<h3>
			{{row["topic_long"]}}
		</h3>
	</header>
	<form action="{{ url_for('add_quest') }}" enctype="multipart/form-data" method="POST">
		<div class="q-text">
			<input style="display: None;" name="question_id" type="text" value="{{row['question_id']}}" />
			<p>
				Marks: {{row["marks"]}}
			</p>
			<p>
				{{row["text"]}}
			</p>
			<div>
				{% if row["tags"] %} 
          {% set tags = row["tags"].split(';') %} 
          {% for tag in tags %}
  				<h4 class="tag">
  					{{ tag }}
  				</h4>
          {% endfor %} 
        {% endif %}
			</div>
			<button id="{{ row['question_id'] }}" class="detail-button" type="button" onclick=popUp(this)>
				Detail
			</button>
			<button class="detail-button" type="submit">
				Add
			</button>
		</div>
	</form>
</article>
{% endfor %}
<div style="display: block;">
	<a href="/">
		Go back to home page
	</a>
</div>
<!-- Modal blocks-->
{% for row in rows %}
<form action="{{ url_for('add_quest') }}" enctype="multipart/form-data" method="POST">
	<div id="modal_{{ row['question_id'] }}" class="modal" role="dialog">
		<div class="modal-view">
			<!-- Modal content-->
			<div>
				<div>
					<h4 class="modal-title">
						{{row["topic_long"]}}
					</h4>
				</div>
				<div class="modal-body">
					<input style="display: None;" name="question_id" type="text" value="{{row['question_id']}}" />
					 {% if row['image'] %}
					<img src="{{row['image']}}" alt="Image for question" />
					 {% endif %}
					<p>
						Marks: {{row["marks"]}}
					</p>
					<p>
						{{row["text"]}}
					</p>
					<p>
						{{row["marking_criteria"]}}
					</p>
					<p>
						{{row["answer"]}}
					</p>
					<div>
						{% if row["tags"] %} 
              {% set tags = row["tags"].split(';') %} 
              {% for tag in tags %}
  						<h4 class="tag">
  							{{ tag }}
  						</h4>
              {% endfor %} 
            {% endif %}
					</div>
				</div>
				<div class="modal-footer">
					<button class="detail-button" type="button" onclick=popDown()>
						Close
					</button>
					<button class="detail-button" type="submit">
						Add
					</button>
				</div>
			</div>
		</div>
	</div>
</form>
{% endfor %}
   </body>
  <script>
    let thisId = "";
    function popUp(element) {
      thisId = element.id
      document.getElementById(`modal_${thisId}`).style.display = "block";
    }
    function popDown() {
      console.log ("ID: "+ thisId)
      document.getElementById(`modal_${thisId}`).style.display = "none";
    }
  </script>
</html>